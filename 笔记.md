# 笔记
## ref属性
1. 被用来给元素或子组件注册引用信息（id的替代者）
2. 应用在html标签上获取的是真实DOM元素，应用在组件标签上的是组件实例对象（vc）
3. 使用方式：
   打标识：
    ```js
      <h1 v-text="msg" ref="title"></h1>
      <button ref="btn" @click="showDOM">点我输出上方的DOM元素</button>
      <School ref="sch"></School>
    ```
   获取：
    ```js
    this.$refs.xxx
    ```
   备注：在组件上标识id属性，获取到的是组件的HTML结构。
    ```js
    <School id="sch"></School>
    ```

## 配置项props
功能：让组件接收外部传过来的数据
>更常见于：你有一个组件，但是data中的数据你已经写好了，别人也想用这个组件，但是数据不一样的情况。你可以使用props配置型，所以这样写可能是复用率最高的。
### 传递数据

```js
  <Student name='昂劳务' sex='男' :age='18'></Student>
```
### 接收数据（组件内部）
1. 只接收，没有任何限制
  ```js
    props: ['name','sex','age'] // 简单接收
  ```
2. 限制类型
  ```js
    props: {
      name: String,
      age: Number, 
      sex: String
    } 
  ```
3. 限制类型、必要性和指定默认值
  ```js
    props: {
    name: {
      type: String,
      require: true // name是必要的
    },
    age: {
      type: Number,
      default: 99 // 默认值
    },
    sex: {
      type: String,
      require: true
    }
  }
  ```
### 备注
props是只读的，Vue底层会监测你对props的修改，入宫进行了修改，就会发出警告。
如果业务确实需要修改，那么可以赋值props的内容到data中一份，然后渲染和修改data中的数据。
```js
  // html
  <h2>学生年龄：{{ this.ageFlag }}</h2>

  // data
  data() {
    return {
      msg:'我是谁？',
      ageFlag: this.age // *
    }
  },

  //methods
  methods: {
    updateAge(){
      this.ageFlag++;
    }
  },
```

## mixin配置项
用于当两个组件都要相同的东西时，抽离出来写到一个文件中，然后再引入。
可以把多个组件共用的配置提取成一个混入对象。
### 使用方式
1. 定义混合（在单独的文件中）
   把多个组件的相同部分抽离到一个单独的[文件中](.src/mixin.js)中,在组件中是什么样的，在mixin中就是什么样的。
   ```js
    export const mixin = {
      methods: {
        showName(){
          alert(this.name);
        }
      }
    }
    export const dataMixin = {
      data() {
        return {
          testNum: 99
        }
      },
    }
   ```
2. 使用混合
   1. 全局混合：（在[main文件](.src/main.js)中）
   ```js
    import name from 'xxx'
    Vue.mixin(name);
   ```
   2. 局部混合：（在当前组件文件）
   ```js
    import name from 'xxx' 
    mixins:[name,...];
   ```
### 备注
对于mixin混合，若发生冲突，Vue会让原有组件中的配置优先生效。但生命周期函数除外。

## 插件
用于增强Vue
本质：包含install方法的一个对象，install的第一个参数是Vue，第二个以后的参数是插件使用者传递的参数数据。
### 定义插件
在一个新的文件夹plugins.js中定义插件：
```js
  export default {
    install(Vue,options) {
      // 1. 添加全局过滤器
      Vue.filter(...)

      // 2. 添加全局指令
      Vue.directive(...)

      // 3. 配置全局混合
      Vue.mixin(...)

      // 4. 在原型上添加方法
      Vue.prototype.$myMethod=function am(params) {
        
      }
      Vue.prototype.$myProperty=xxx
    }
}
```
### 使用插件
```js
  import plugin from './src/plugins.js' // 在new Vue之前。
  Vue.use($插件名)
```

## scoped样式
### 引入问题
:question:在多个组件中，多个组件的样式虽然是分开设置的，但最后（浏览器渲染时）Vue还是会合到一张样式表中，这就有可能造成样式class重名的问题。

### 解决
- 当重叠时，谁在APP中最后引入，就以谁为准。
- App组件中写的样式不适合使用scoped属性，因为所有的组件都汇总到了App组件，它的样式应该用来写全局样式比较。
  ```html
  <style scoped lang='less'>
    .demo2 {
      background-color: orange;
      .qwe {
        font-size: 40px;
      }
    }
  </style>
  ```
- scoped属性的实现原理=>**属性选择器**
![image.png](https://pic.rmb.bdstatic.com/bjh/19ead2a9001dc8bcc4dc2608999d02d3.jpeg)
![image.png](https://pic.rmb.bdstatic.com/bjh/ba6c862bac0f1b46556b610bf2d221a8.jpeg)
- style中的lang属性是css预编译语言，如lang='less',但是脚手架处理不了less，需要安装less。命令：
  ```
  npm i less-loader
  ```
- 查看webpack的版本
  ```js
    npm view webpack versions
  ```

## 组件化编码流程（通用）
